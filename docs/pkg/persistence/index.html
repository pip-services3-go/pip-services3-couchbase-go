<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="theme-color" content="#375EAB">

  <title>persistence - Go Documentation Server</title>

<link type="text/css" rel="stylesheet" href="../../lib/godoc/style.css">

<script>window.initFuncs = [];</script>
<script src="../../lib/godoc/jquery.js" defer></script>



<script>var goVersion = "go1.13.15";</script>
<script src="../../lib/godoc/godocs.js" defer></script>
</head>
<body>

<div id='lowframe' style="position: fixed; bottom: 0; left: 0; height: 0; width: 100%; border-top: thin solid grey; background-color: white; overflow: auto;">
...
</div><!-- #lowframe -->

<div id="topbar" class="wide"><div class="container">
<div class="top-heading" id="heading-wide"><a href="../index.html">Go Documentation Server</a></div>
<div class="top-heading" id="heading-narrow"><a href="../index.html">GoDoc</a></div>
<a href="index.html#" id="menu-button"><span id="menu-button-arrow">&#9661;</span></a>
<form method="GET" action="http://localhost:6060/search">
<div id="menu">

<span class="search-box"><input type="search" id="search" name="q" placeholder="Search" aria-label="Search" required><button type="submit"><span><!-- magnifying glass: --><svg width="24" height="24" viewBox="0 0 24 24"><title>submit search</title><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/><path d="M0 0h24v24H0z" fill="none"/></svg></span></button></span>
</div>
</form>

</div></div>



<div id="page" class="wide">
<div class="container">


  <h1>
    Package persistence
    <span class="text-muted"></span>
  </h1>







<div id="nav"></div>


<!--
	Copyright 2009 The Go Authors. All rights reserved.
	Use of this source code is governed by a BSD-style
	license that can be found in the LICENSE file.
-->
<!--
	Note: Static (i.e., not template-generated) href and id
	attributes start with "pkg-" to make it impossible for
	them to conflict with generated attributes (some of which
	correspond to Go identifiers).
-->

	<script>
	document.ANALYSIS_DATA = null;
	document.CALLGRAPH = null;
	</script>

	
		
		<div id="short-nav">
			<dl>
			<dd><code>import "persistence"</code></dd>
			</dl>
			<dl>
			<dd><a href="index.html#pkg-overview" class="overviewLink">Overview</a></dd>
			<dd><a href="index.html#pkg-index" class="indexLink">Index</a></dd>
			
			
			</dl>
		</div>
		<!-- The package's Name is printed as title by the top-level template -->
		<div id="pkg-overview" class="toggleVisible">
			<div class="collapsed">
				<h2 class="toggleButton" title="Click to show Overview section">Overview ▹</h2>
			</div>
			<div class="expanded">
				<h2 class="toggleButton" title="Click to hide Overview section">Overview ▾</h2>
				
				
			</div>
		</div>

		<div id="pkg-index" class="toggleVisible">
		<div class="collapsed">
			<h2 class="toggleButton" title="Click to show Index section">Index ▹</h2>
		</div>
		<div class="expanded">
			<h2 class="toggleButton" title="Click to hide Index section">Index ▾</h2>

		<!-- Table of contents for API; must be named manual-nav to turn off auto nav. -->
			<div id="manual-nav">
			<dl>
			
			
			
			
				
				<dd><a href="index.html#CouchbaseConnection">type CouchbaseConnection</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#NewCouchbaseConnection">func NewCouchbaseConnection(bucketName string) *CouchbaseConnection</a></dd>
				
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#CouchbaseConnection.Close">func (c *CouchbaseConnection) Close(correlationId string) (err error)</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#CouchbaseConnection.Configure">func (c *CouchbaseConnection) Configure(config *cconf.ConfigParams)</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#CouchbaseConnection.GetBucket">func (c *CouchbaseConnection) GetBucket() *gocb.Bucket</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#CouchbaseConnection.GetBucketName">func (c *CouchbaseConnection) GetBucketName() string</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#CouchbaseConnection.GetConnection">func (c *CouchbaseConnection) GetConnection() *gocb.Cluster</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#CouchbaseConnection.IsOpen">func (c *CouchbaseConnection) IsOpen() bool</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#CouchbaseConnection.Open">func (c *CouchbaseConnection) Open(correlationId string) (err error)</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#CouchbaseConnection.SetReferences">func (c *CouchbaseConnection) SetReferences(references cref.IReferences)</a></dd>
				
			
				
				<dd><a href="index.html#CouchbasePersistence">type CouchbasePersistence</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#NewCouchbasePersistence">func NewCouchbasePersistence(proto reflect.Type, bucket string) *CouchbasePersistence</a></dd>
				
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#CouchbasePersistence.Clear">func (c *CouchbasePersistence) Clear(correlationId string) (err error)</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#CouchbasePersistence.Close">func (c *CouchbasePersistence) Close(correlationId string) (err error)</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#CouchbasePersistence.Configure">func (c *CouchbasePersistence) Configure(config *cconf.ConfigParams)</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#CouchbasePersistence.ConvertFromMap">func (c *CouchbasePersistence) ConvertFromMap(buf interface{}) interface{}</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#CouchbasePersistence.ConvertFromPublic">func (c *CouchbasePersistence) ConvertFromPublic(item *interface{}) *interface{}</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#CouchbasePersistence.ConvertToPublic">func (c *CouchbasePersistence) ConvertToPublic(item *interface{})</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#CouchbasePersistence.Create">func (c *CouchbasePersistence) Create(correlationId string, item interface{}) (result interface{}, err error)</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#CouchbasePersistence.DeleteByFilter">func (c *CouchbasePersistence) DeleteByFilter(correlationId string, filter string) (err error)</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#CouchbasePersistence.GenerateBucketId">func (c *CouchbasePersistence) GenerateBucketId(value interface{}) string</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#CouchbasePersistence.GenerateBucketIds">func (c *CouchbasePersistence) GenerateBucketIds(value []interface{}) []string</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#CouchbasePersistence.GetConvResult">func (c *CouchbasePersistence) GetConvResult(docPointer reflect.Value) interface{}</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#CouchbasePersistence.GetListByFilter">func (c *CouchbasePersistence) GetListByFilter(correlationId string, filter string, sort string, sel string) (items []interface{}, err error)</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#CouchbasePersistence.GetOneRandom">func (c *CouchbasePersistence) GetOneRandom(correlationId string, filter string) (item interface{}, err error)</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#CouchbasePersistence.GetPageByFilter">func (c *CouchbasePersistence) GetPageByFilter(correlationId string, filter string, paging *cdata.PagingParams, sort string, sel string) (page *cdata.DataPage, err error)</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#CouchbasePersistence.GetProtoPtr">func (c *CouchbasePersistence) GetProtoPtr() reflect.Value</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#CouchbasePersistence.GetPtrIfNeed">func (c *CouchbasePersistence) GetPtrIfNeed(item interface{}) interface{}</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#CouchbasePersistence.IsOpen">func (c *CouchbasePersistence) IsOpen() bool</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#CouchbasePersistence.Open">func (c *CouchbasePersistence) Open(correlationId string) (err error)</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#CouchbasePersistence.SetReferences">func (c *CouchbasePersistence) SetReferences(references cref.IReferences)</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#CouchbasePersistence.UnsetReferences">func (c *CouchbasePersistence) UnsetReferences()</a></dd>
				
			
				
				<dd><a href="index.html#IdentifiableCouchbasePersistence">type IdentifiableCouchbasePersistence</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#NewIdentifiableCouchbasePersistence">func NewIdentifiableCouchbasePersistence(proto reflect.Type, bucket string, collection string) *IdentifiableCouchbasePersistence</a></dd>
				
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#IdentifiableCouchbasePersistence.Configure">func (c *IdentifiableCouchbasePersistence) Configure(config *cconf.ConfigParams)</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#IdentifiableCouchbasePersistence.ConvertFromPublicPartial">func (c *IdentifiableCouchbasePersistence) ConvertFromPublicPartial(value *interface{}) *interface{}</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#IdentifiableCouchbasePersistence.Create">func (c *IdentifiableCouchbasePersistence) Create(correlationId string, item interface{}) (result interface{}, err error)</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#IdentifiableCouchbasePersistence.DeleteById">func (c *IdentifiableCouchbasePersistence) DeleteById(correlationId string, id interface{}) (item interface{}, err error)</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#IdentifiableCouchbasePersistence.DeleteByIds">func (c *IdentifiableCouchbasePersistence) DeleteByIds(correlationId string, ids []interface{}) (err error)</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#IdentifiableCouchbasePersistence.GetListByIds">func (c *IdentifiableCouchbasePersistence) GetListByIds(correlationId string, ids []interface{}) (items []interface{}, err error)</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#IdentifiableCouchbasePersistence.GetOneById">func (c *IdentifiableCouchbasePersistence) GetOneById(correlationId string, id interface{}) (item interface{}, err error)</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#IdentifiableCouchbasePersistence.Set">func (c *IdentifiableCouchbasePersistence) Set(correlationId string, item interface{}) (result interface{}, err error)</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#IdentifiableCouchbasePersistence.Update">func (c *IdentifiableCouchbasePersistence) Update(correlationId string, item interface{}) (result interface{}, err error)</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#IdentifiableCouchbasePersistence.UpdatePartially">func (c *IdentifiableCouchbasePersistence) UpdatePartially(correlationId string, id interface{}, data *cdata.AnyValueMap) (item interface{}, err error)</a></dd>
				
			
			
			</dl>
			</div><!-- #manual-nav -->

		

		
			<h3>Package files</h3>
			<p>
			<span style="font-size:90%">
			
				<a href="http://localhost:6060/src/persistence/CouchbaseConnection.go">CouchbaseConnection.go</a>
			
				<a href="http://localhost:6060/src/persistence/CouchbasePersistence.go">CouchbasePersistence.go</a>
			
				<a href="http://localhost:6060/src/persistence/IdentifiableCouchbasePersistence.go">IdentifiableCouchbasePersistence.go</a>
			
			</span>
			</p>
		
		</div><!-- .expanded -->
		</div><!-- #pkg-index -->

		

		
		
		
		
			
			
			<h2 id="CouchbaseConnection">type <a href="http://localhost:6060/src/persistence/CouchbaseConnection.go?s=2130:2611#L38">CouchbaseConnection</a>
				<a class="permalink" href="index.html#CouchbaseConnection">&#xb6;</a>
				
				
			</h2>
			<p>
CouchbaseConnection it is couchbase connection using plain couchbase driver.
This is the most basic persistence component that is only
able to store data items of any type. Specific CRUD operations
over the data items must be implemented in child classes by
accessing c.Connection properties.
</p>
<p>
Configuration parameters:
</p>
<pre> - bucket:                      (optional) Couchbase bucket name
 - connection(s):
   - discovery_key:             (optional) a key to retrieve the connection from connect.idiscovery.html IDiscovery]]
   - host:                      host name or IP address
   - port:                      port number (default: 27017)
   - uri:                       resource URI or connection string with all parameters in it
 - credential(s):
   - store_key:                 (optional) a key to retrieve the credentials from auth.icredentialstore.html ICredentialStore]]
   - username:                  (optional) user name
   - password:                  (optional) user password
 - options:
   - auto_create:               (optional) automatically create missing bucket (default: false)
   - auto_index:                (optional) automatically create primary index (default: false)
   - flush_enabled:             (optional) bucket flush enabled (default: false)
   - bucket_type:               (optional) bucket type (default: couchbase)
   - ram_quota:                 (optional) RAM quota in MB (default: 100)

References:
</pre>
<p>
- *:logger:*:*:1.0           		(optional) ILogger components to pass log messages
- *:discovery:*:*:1.0        		(optional) IDiscovery services
- *:credential-store:\*:\*:1.0 		(optional) Credential stores to resolve credentials
</p>

			<pre>type CouchbaseConnection struct {

    <span class="comment">//The logger.</span>
<span id="CouchbaseConnection.Logger"></span>    Logger *<a href="http://localhost:6060/pkg/github.com/pip-services3-go/pip-services3-components-go/log/">clog</a>.<a href="http://localhost:6060/pkg/github.com/pip-services3-go/pip-services3-components-go/log/#CompositeLogger">CompositeLogger</a>
    <span class="comment">//The connection resolver.</span>
<span id="CouchbaseConnection.ConnectionResolver"></span>    ConnectionResolver *<a href="http://localhost:6060/pkg/github.com/pip-services3-go/pip-services3-couchbase-go/connect/">couchcon</a>.<a href="http://localhost:6060/pkg/github.com/pip-services3-go/pip-services3-couchbase-go/connect/#CouchbaseConnectionResolver">CouchbaseConnectionResolver</a>
    <span class="comment">//The configuration options.</span>
<span id="CouchbaseConnection.Options"></span>    Options *<a href="http://localhost:6060/pkg/github.com/pip-services3-go/pip-services3-commons-go/config/">cconf</a>.<a href="http://localhost:6060/pkg/github.com/pip-services3-go/pip-services3-commons-go/config/#ConfigParams">ConfigParams</a>
    <span class="comment">//The Couchbase cluster connection object.</span>
<span id="CouchbaseConnection.Connection"></span>    Connection *<a href="http://localhost:6060/pkg/gopkg.in/couchbase/gocb.v1/">gocb</a>.<a href="http://localhost:6060/pkg/gopkg.in/couchbase/gocb.v1/#Cluster">Cluster</a>
    <span class="comment">//The Couchbase bucket name.</span>
<span id="CouchbaseConnection.BucketName"></span>    BucketName <a href="http://localhost:6060/pkg/builtin/#string">string</a>
    <span class="comment">//The Couchbase bucket object.</span>
<span id="CouchbaseConnection.Bucket"></span>    Bucket        *<a href="http://localhost:6060/pkg/gopkg.in/couchbase/gocb.v1/">gocb</a>.<a href="http://localhost:6060/pkg/gopkg.in/couchbase/gocb.v1/#Bucket">Bucket</a>
<span id="CouchbaseConnection.Authenticator"></span>    Authenticator <a href="http://localhost:6060/pkg/gopkg.in/couchbase/gocb.v1/">gocb</a>.<a href="http://localhost:6060/pkg/gopkg.in/couchbase/gocb.v1/#PasswordAuthenticator">PasswordAuthenticator</a>
    <span class="comment">// contains filtered or unexported fields</span>
}
</pre>

			

			

			
			
			

			
				
				<h3 id="NewCouchbaseConnection">func <a href="http://localhost:6060/src/persistence/CouchbaseConnection.go?s=2757:2824#L58">NewCouchbaseConnection</a>
					<a class="permalink" href="index.html#NewCouchbaseConnection">&#xb6;</a>
					
					
				</h3>
				<pre>func NewCouchbaseConnection(bucketName <a href="http://localhost:6060/pkg/builtin/#string">string</a>) *<a href="index.html#CouchbaseConnection">CouchbaseConnection</a></pre>
				<p>
NewCouchbaseConnection are creates a new instance of the connection component.
Parameters:
</p>
<pre>- bucketName the name of couchbase bucket
</pre>

				
				
			

			
				
				<h3 id="CouchbaseConnection.Close">func (*CouchbaseConnection) <a href="http://localhost:6060/src/persistence/CouchbaseConnection.go?s=7577:7646#L236">Close</a>
					<a class="permalink" href="index.html#CouchbaseConnection.Close">&#xb6;</a>
					
					
				</h3>
				<pre>func (c *<a href="index.html#CouchbaseConnection">CouchbaseConnection</a>) Close(correlationId <a href="http://localhost:6060/pkg/builtin/#string">string</a>) (err <a href="http://localhost:6060/pkg/builtin/#error">error</a>)</pre>
				<p>
Closes component and frees used resources.
Parameters:
</p>
<pre>- correlationId (optional) transaction id to trace execution through call chain.
</pre>
<p>
Returns: error
error or null no errors occured.
</p>

				
				
				
			
				
				<h3 id="CouchbaseConnection.Configure">func (*CouchbaseConnection) <a href="http://localhost:6060/src/persistence/CouchbaseConnection.go?s=3455:3522#L80">Configure</a>
					<a class="permalink" href="index.html#CouchbaseConnection.Configure">&#xb6;</a>
					
					
				</h3>
				<pre>func (c *<a href="index.html#CouchbaseConnection">CouchbaseConnection</a>) Configure(config *<a href="http://localhost:6060/pkg/github.com/pip-services3-go/pip-services3-commons-go/config/">cconf</a>.<a href="http://localhost:6060/pkg/github.com/pip-services3-go/pip-services3-commons-go/config/#ConfigParams">ConfigParams</a>)</pre>
				<p>
Configure are configures component by passing configuration parameters.
Parameters:
</p>
<pre>- config    configuration parameters to be set.
</pre>

				
				
				
			
				
				<h3 id="CouchbaseConnection.GetBucket">func (*CouchbaseConnection) <a href="http://localhost:6060/src/persistence/CouchbaseConnection.go?s=8016:8070#L252">GetBucket</a>
					<a class="permalink" href="index.html#CouchbaseConnection.GetBucket">&#xb6;</a>
					
					
				</h3>
				<pre>func (c *<a href="index.html#CouchbaseConnection">CouchbaseConnection</a>) GetBucket() *<a href="http://localhost:6060/pkg/gopkg.in/couchbase/gocb.v1/">gocb</a>.<a href="http://localhost:6060/pkg/gopkg.in/couchbase/gocb.v1/#Bucket">Bucket</a></pre>
				<p>
GetBucket method are returned opened bucket
</p>

				
				
				
			
				
				<h3 id="CouchbaseConnection.GetBucketName">func (*CouchbaseConnection) <a href="http://localhost:6060/src/persistence/CouchbaseConnection.go?s=8142:8194#L257">GetBucketName</a>
					<a class="permalink" href="index.html#CouchbaseConnection.GetBucketName">&#xb6;</a>
					
					
				</h3>
				<pre>func (c *<a href="index.html#CouchbaseConnection">CouchbaseConnection</a>) GetBucketName() <a href="http://localhost:6060/pkg/builtin/#string">string</a></pre>
				<p>
GetBucketName method are returned bucket name
</p>

				
				
				
			
				
				<h3 id="CouchbaseConnection.GetConnection">func (*CouchbaseConnection) <a href="http://localhost:6060/src/persistence/CouchbaseConnection.go?s=7883:7942#L247">GetConnection</a>
					<a class="permalink" href="index.html#CouchbaseConnection.GetConnection">&#xb6;</a>
					
					
				</h3>
				<pre>func (c *<a href="index.html#CouchbaseConnection">CouchbaseConnection</a>) GetConnection() *<a href="http://localhost:6060/pkg/gopkg.in/couchbase/gocb.v1/">gocb</a>.<a href="http://localhost:6060/pkg/gopkg.in/couchbase/gocb.v1/#Cluster">Cluster</a></pre>
				<p>
GetConnection method are return opened connection
</p>

				
				
				
			
				
				<h3 id="CouchbaseConnection.IsOpen">func (*CouchbaseConnection) <a href="http://localhost:6060/src/persistence/CouchbaseConnection.go?s=4178:4221#L97">IsOpen</a>
					<a class="permalink" href="index.html#CouchbaseConnection.IsOpen">&#xb6;</a>
					
					
				</h3>
				<pre>func (c *<a href="index.html#CouchbaseConnection">CouchbaseConnection</a>) IsOpen() <a href="http://localhost:6060/pkg/builtin/#bool">bool</a></pre>
				<p>
IsOpen method are checks if the component is opened.
Retrun true if the component has been opened and false otherwise.
</p>

				
				
				
			
				
				<h3 id="CouchbaseConnection.Open">func (*CouchbaseConnection) <a href="http://localhost:6060/src/persistence/CouchbaseConnection.go?s=4450:4518#L106">Open</a>
					<a class="permalink" href="index.html#CouchbaseConnection.Open">&#xb6;</a>
					
					
				</h3>
				<pre>func (c *<a href="index.html#CouchbaseConnection">CouchbaseConnection</a>) Open(correlationId <a href="http://localhost:6060/pkg/builtin/#string">string</a>) (err <a href="http://localhost:6060/pkg/builtin/#error">error</a>)</pre>
				<p>
Open method are opens the component.
Parameters:
</p>
<pre>- correlationId  (optional) transaction id to trace execution through call chain.
</pre>
<p>
Returns: error
error or nil no errors occured.
</p>

				
				
				
			
				
				<h3 id="CouchbaseConnection.SetReferences">func (*CouchbaseConnection) <a href="http://localhost:6060/src/persistence/CouchbaseConnection.go?s=3891:3963#L90">SetReferences</a>
					<a class="permalink" href="index.html#CouchbaseConnection.SetReferences">&#xb6;</a>
					
					
				</h3>
				<pre>func (c *<a href="index.html#CouchbaseConnection">CouchbaseConnection</a>) SetReferences(references <a href="http://localhost:6060/pkg/github.com/pip-services3-go/pip-services3-commons-go/refer/">cref</a>.<a href="http://localhost:6060/pkg/github.com/pip-services3-go/pip-services3-commons-go/refer/#IReferences">IReferences</a>)</pre>
				<p>
SetReferences are sets references to dependent components.
Parameters:
</p>
<pre>- references 	references to locate the component dependencies.
</pre>

				
				
				
			
		
			
			
			<h2 id="CouchbasePersistence">type <a href="http://localhost:6060/src/persistence/CouchbasePersistence.go?s=4436:5128#L111">CouchbasePersistence</a>
				<a class="permalink" href="index.html#CouchbasePersistence">&#xb6;</a>
				
				
			</h2>
			<p>
CouchbasePersistence abstract persistence component that stores data in Couchbase
and is based using Couchbaseose object relational mapping.
</p>
<p>
This is the most basic persistence component that is only
able to store data items of interface{} type. Specific CRUD operations
over the data items must be implemented in child classes by
accessing c._collection or c._model properties.
</p>
<p>
Configuration parameters:
</p>
<pre> - bucket:                      (optional) Couchbase bucket name
 - connection(s):
   - discovery_key:             (optional) a key to retrieve the connection from connect.idiscovery.html IDiscovery
   - host:                      host name or IP address
   - port:                      port number (default: 27017)
   - uri:                       resource URI or connection string with all parameters in it
 - credential(s):
   - store_key:                 (optional) a key to retrieve the credentials from auth.icredentialstore.html ICredentialStore
   - username:                  (optional) user name
   - password:                  (optional) user password
 - options:
   - auto_create:               (optional) automatically create missing bucket (default: false)
   - auto_index:                (optional) automatically create primary index (default: false)
   - flush_enabled:             (optional) bucket flush enabled (default: false)
   - bucket_type:               (optional) bucket type (default: couchbase)
   - ram_quota:                 (optional) RAM quota in MB (default: 100)

References:
</pre>
<p>
- *:logger:*:*:1.0           (optional) ILogger components to pass log messages
- *:discovery:*:*:1.0        (optional) IDiscovery services
- *:credential-store:*:*:1.0 (optional) Credential stores to resolve credentials
</p>
<p>
Example:
</p>
<pre>type MyCouchbasePersistence struct {
  *CouchbasePersistence
}

func NewMyCouchbasePersistence() *MyCouchbasePersistence {
	c := MyCouchbasePersistence{}
	c.CouchbasePersistence = NewCouchbasePersistence(reflect.TypeOf(MyData{}), &#34;mycollection&#34;);
	return &amp;c;
}

func (c *MyCouchbasePersistence) GetOneById(correlationId string, id interface{}) (item interface{}, err error) {
	objectId := c.GenerateBucketId(id)

	buf := make(map[string]interface{}, 0)
	_, getErr := c.Bucket.Get(objectId, &amp;buf)
	if getErr != nil {
		// Ignore &#34;Key does not exist on the server&#34; error
		if getErr == gocb.ErrKeyNotFound {
			return nil, nil
		}
		return nil, getErr
	}
	c.Logger.Trace(correlationId, &#34;Retrieved from %s by id = %s&#34;, c.BucketName, objectId)
	item = c.ConvertFromMap(buf)
	return item, nil
}

func (c *IdentifiableCouchbasePersistence) Set(correlationId string, item interface{}) (result interface{}, err error) {
  if item == nil {
      return nil, nil
  }
  var newItem interface{}
  newItem = cmpersist.CloneObject(item)
  // Assign unique id if not exist
  cmpersist.GenerateObjectId(&amp;newItem)
  id := cmpersist.GetObjectId(newItem)
  setItem := c.Overrides.ConvertFromPublic(&amp;newItem)
  objectId := c.GenerateBucketId(id)

  _, upsertErr := c.Bucket.Upsert(objectId, setItem, 0)

  if upsertErr != nil {
     return nil, upsertErr
  }

  c.Logger.Trace(correlationId, &#34;Set in %s with id = %s&#34;, c.BucketName, id)
  c.Overrides.ConvertToPublic(&amp;newItem)
  return c.GetPtrIfNeed(newItem), nil
}

persistence := NewMyCouchbasePersistence();
persistence.Configure(cconf.NewConfigParamsFromTuples(
    &#34;host&#34;, &#34;localhost&#34;,
    &#34;port&#34;, 27017,
));

persitence.Open(&#34;123&#34;)
     ...

setItem, err := persistence.Set(&#34;123&#34;, MyData{ name: &#34;ABC&#34; })
if setErr=== nil {
  item, err := persistence.GetOneById(&#34;123&#34;, setItem.Id)
  fmt.Println(item);      // Result: { name: &#34;ABC&#34;, Id:&#34;...&#34; }
}
</pre>

			<pre>type CouchbasePersistence struct {

    <span class="comment">//The dependency resolver.</span>
<span id="CouchbasePersistence.DependencyResolver"></span>    DependencyResolver *<a href="http://localhost:6060/pkg/github.com/pip-services3-go/pip-services3-commons-go/refer/">crefer</a>.<a href="http://localhost:6060/pkg/github.com/pip-services3-go/pip-services3-commons-go/refer/#DependencyResolver">DependencyResolver</a>
    <span class="comment">//The logger.</span>
<span id="CouchbasePersistence.Logger"></span>    Logger *<a href="http://localhost:6060/pkg/github.com/pip-services3-go/pip-services3-components-go/log/">clog</a>.<a href="http://localhost:6060/pkg/github.com/pip-services3-go/pip-services3-components-go/log/#CompositeLogger">CompositeLogger</a>
    <span class="comment">//The Couchbase connection component.</span>
<span id="CouchbasePersistence.Connection"></span>    Connection *<a href="index.html#CouchbaseConnection">CouchbaseConnection</a>
    <span class="comment">//The configuration options.</span>
<span id="CouchbasePersistence.Options"></span>    Options *<a href="http://localhost:6060/pkg/github.com/pip-services3-go/pip-services3-commons-go/config/">cconf</a>.<a href="http://localhost:6060/pkg/github.com/pip-services3-go/pip-services3-commons-go/config/#ConfigParams">ConfigParams</a>
    <span class="comment">//The Couchbase cluster object.</span>
<span id="CouchbasePersistence.Cluster"></span>    Cluster *<a href="http://localhost:6060/pkg/gopkg.in/couchbase/gocb.v1/">gocb</a>.<a href="http://localhost:6060/pkg/gopkg.in/couchbase/gocb.v1/#Cluster">Cluster</a>
    <span class="comment">//The Couchbase bucket name.</span>
<span id="CouchbasePersistence.BucketName"></span>    BucketName <a href="http://localhost:6060/pkg/builtin/#string">string</a>
    <span class="comment">//The Couchbase bucket object.</span>
<span id="CouchbasePersistence.Bucket"></span>    Bucket *<a href="http://localhost:6060/pkg/gopkg.in/couchbase/gocb.v1/">gocb</a>.<a href="http://localhost:6060/pkg/gopkg.in/couchbase/gocb.v1/#Bucket">Bucket</a>
<span id="CouchbasePersistence.Prototype"></span>    <span class="comment">// Prototype for convert</span>
    Prototype <a href="http://localhost:6060/pkg/reflect/">reflect</a>.<a href="http://localhost:6060/pkg/reflect/#Type">Type</a>

<span id="CouchbasePersistence.CollectionName"></span>    CollectionName <a href="http://localhost:6060/pkg/builtin/#string">string</a>

<span id="CouchbasePersistence.MaxPageSize"></span>    MaxPageSize <a href="http://localhost:6060/pkg/builtin/#int">int</a>
    <span class="comment">// contains filtered or unexported fields</span>
}
</pre>

			

			

			
			
			

			
				
				<h3 id="NewCouchbasePersistence">func <a href="http://localhost:6060/src/persistence/CouchbasePersistence.go?s=5325:5410#L143">NewCouchbasePersistence</a>
					<a class="permalink" href="index.html#NewCouchbasePersistence">&#xb6;</a>
					
					
				</h3>
				<pre>func NewCouchbasePersistence(proto <a href="http://localhost:6060/pkg/reflect/">reflect</a>.<a href="http://localhost:6060/pkg/reflect/#Type">Type</a>, bucket <a href="http://localhost:6060/pkg/builtin/#string">string</a>) *<a href="index.html#CouchbasePersistence">CouchbasePersistence</a></pre>
				<p>
NewCouchbasePersistence method are creates a new instance of the persistence component.
Parameters:
</p>
<pre>- bucket  a bucket name.
</pre>
<p>
Returns:  *CouchbasePersistence pointer on new instance
</p>

				
				
			

			
				
				<h3 id="CouchbasePersistence.Clear">func (*CouchbasePersistence) <a href="http://localhost:6060/src/persistence/CouchbasePersistence.go?s=9399:9469#L281">Clear</a>
					<a class="permalink" href="index.html#CouchbasePersistence.Clear">&#xb6;</a>
					
					
				</h3>
				<pre>func (c *<a href="index.html#CouchbasePersistence">CouchbasePersistence</a>) Clear(correlationId <a href="http://localhost:6060/pkg/builtin/#string">string</a>) (err <a href="http://localhost:6060/pkg/builtin/#error">error</a>)</pre>
				<p>
Clear method are clears component state.
</p>
<pre>- correlationId 	(optional) transaction id to trace execution through call chain.
</pre>
<p>
Returns: error
error or nil no errors occured.
</p>

				
				
				
			
				
				<h3 id="CouchbasePersistence.Close">func (*CouchbasePersistence) <a href="http://localhost:6060/src/persistence/CouchbasePersistence.go?s=8842:8912#L259">Close</a>
					<a class="permalink" href="index.html#CouchbasePersistence.Close">&#xb6;</a>
					
					
				</h3>
				<pre>func (c *<a href="index.html#CouchbasePersistence">CouchbasePersistence</a>) Close(correlationId <a href="http://localhost:6060/pkg/builtin/#string">string</a>) (err <a href="http://localhost:6060/pkg/builtin/#error">error</a>)</pre>
				<p>
Close method are closes component and frees used resources.
</p>
<pre>- correlationId  (optional) transaction id to trace execution through call chain.
</pre>
<p>
Returns: error
error or nil no errors occured.
</p>

				
				
				
			
				
				<h3 id="CouchbasePersistence.Configure">func (*CouchbasePersistence) <a href="http://localhost:6060/src/persistence/CouchbasePersistence.go?s=6122:6190#L165">Configure</a>
					<a class="permalink" href="index.html#CouchbasePersistence.Configure">&#xb6;</a>
					
					
				</h3>
				<pre>func (c *<a href="index.html#CouchbasePersistence">CouchbasePersistence</a>) Configure(config *<a href="http://localhost:6060/pkg/github.com/pip-services3-go/pip-services3-commons-go/config/">cconf</a>.<a href="http://localhost:6060/pkg/github.com/pip-services3-go/pip-services3-commons-go/config/#ConfigParams">ConfigParams</a>)</pre>
				<p>
Configure method are configures component by passing configuration parameters.
</p>
<pre>- config configuration parameters to be set.
</pre>

				
				
				
			
				
				<h3 id="CouchbasePersistence.ConvertFromMap">func (*CouchbasePersistence) <a href="http://localhost:6060/src/persistence/CouchbasePersistence.go?s=21139:21213#L640">ConvertFromMap</a>
					<a class="permalink" href="index.html#CouchbasePersistence.ConvertFromMap">&#xb6;</a>
					
					
				</h3>
				<pre>func (c *<a href="index.html#CouchbasePersistence">CouchbasePersistence</a>) ConvertFromMap(buf interface{}) interface{}</pre>
				<p>
ConvertFromMap method are converts from map[string]interface{} to object, defined by c.Prototype
</p>

				
				
				
			
				
				<h3 id="CouchbasePersistence.ConvertFromPublic">func (*CouchbasePersistence) <a href="http://localhost:6060/src/persistence/CouchbasePersistence.go?s=10075:10155#L300">ConvertFromPublic</a>
					<a class="permalink" href="index.html#CouchbasePersistence.ConvertFromPublic">&#xb6;</a>
					
					
				</h3>
				<pre>func (c *<a href="index.html#CouchbasePersistence">CouchbasePersistence</a>) ConvertFromPublic(item *interface{}) *interface{}</pre>
				<p>
ConvertFromPublic method help convert object (map) from public view by added &#34;_c&#34; field with collection name
Parameters:
</p>
<pre>- item *interface{} item for convert
</pre>
<p>
Returns: *interface{} converted item
</p>

				
				
				
			
				
				<h3 id="CouchbasePersistence.ConvertToPublic">func (*CouchbasePersistence) <a href="http://localhost:6060/src/persistence/CouchbasePersistence.go?s=11003:11068#L330">ConvertToPublic</a>
					<a class="permalink" href="index.html#CouchbasePersistence.ConvertToPublic">&#xb6;</a>
					
					
				</h3>
				<pre>func (c *<a href="index.html#CouchbasePersistence">CouchbasePersistence</a>) ConvertToPublic(item *interface{})</pre>
				<p>
ConvertToPublic method is convert object (map) to public view by exluded &#34;_c&#34; field
Parameters:
</p>
<pre>- item *interface{}  item for convert
</pre>
<p>
Returns: *interface{} converted item
</p>

				
				
				
			
				
				<h3 id="CouchbasePersistence.Create">func (*CouchbasePersistence) <a href="http://localhost:6060/src/persistence/CouchbasePersistence.go?s=19380:19489#L586">Create</a>
					<a class="permalink" href="index.html#CouchbasePersistence.Create">&#xb6;</a>
					
					
				</h3>
				<pre>func (c *<a href="index.html#CouchbasePersistence">CouchbasePersistence</a>) Create(correlationId <a href="http://localhost:6060/pkg/builtin/#string">string</a>, item interface{}) (result interface{}, err <a href="http://localhost:6060/pkg/builtin/#error">error</a>)</pre>
				<p>
Create method are creates a data item.
Parameters:
</p>
<pre>- correlation_id    (optional) transaction id to trace execution through call chain.
- item              an item to be created.
</pre>
<p>
Returns:  result interface{}, err error
created item or error.
</p>

				
				
				
			
				
				<h3 id="CouchbasePersistence.DeleteByFilter">func (*CouchbasePersistence) <a href="http://localhost:6060/src/persistence/CouchbasePersistence.go?s=18582:18676#L562">DeleteByFilter</a>
					<a class="permalink" href="index.html#CouchbasePersistence.DeleteByFilter">&#xb6;</a>
					
					
				</h3>
				<pre>func (c *<a href="index.html#CouchbasePersistence">CouchbasePersistence</a>) DeleteByFilter(correlationId <a href="http://localhost:6060/pkg/builtin/#string">string</a>, filter <a href="http://localhost:6060/pkg/builtin/#string">string</a>) (err <a href="http://localhost:6060/pkg/builtin/#error">error</a>)</pre>
				<p>
DeleteByFilter method are deletes data items that match to a given filter.
This method shall be called by a public deleteByFilter method from child class that
receives FilterParams and converts them into a filter function.
Parameters:
</p>
<pre>- correlationId     (optional) transaction id to trace execution through call chain.
- filter            (optional) a filter JSON object.
</pre>
<p>
Returns: error
error or nil for success.
</p>

				
				
				
			
				
				<h3 id="CouchbasePersistence.GenerateBucketId">func (*CouchbasePersistence) <a href="http://localhost:6060/src/persistence/CouchbasePersistence.go?s=11673:11746#L355">GenerateBucketId</a>
					<a class="permalink" href="index.html#CouchbasePersistence.GenerateBucketId">&#xb6;</a>
					
					
				</h3>
				<pre>func (c *<a href="index.html#CouchbasePersistence">CouchbasePersistence</a>) GenerateBucketId(value interface{}) <a href="http://localhost:6060/pkg/builtin/#string">string</a></pre>
				<p>
GenerateBucketId method are generates unique id for specific collection in the bucket
Parameters:
</p>
<pre>- value a public unique id.
</pre>
<p>
Retruns a unique bucket id.
</p>

				
				
				
			
				
				<h3 id="CouchbasePersistence.GenerateBucketIds">func (*CouchbasePersistence) <a href="http://localhost:6060/src/persistence/CouchbasePersistence.go?s=12004:12082#L366">GenerateBucketIds</a>
					<a class="permalink" href="index.html#CouchbasePersistence.GenerateBucketIds">&#xb6;</a>
					
					
				</h3>
				<pre>func (c *<a href="index.html#CouchbasePersistence">CouchbasePersistence</a>) GenerateBucketIds(value []interface{}) []<a href="http://localhost:6060/pkg/builtin/#string">string</a></pre>
				<p>
Generates a list of unique ids for specific collection in the bucket
Parameters:
</p>
<pre>- value a public unique ids.
</pre>
<p>
Retruns a unique bucket ids.
</p>

				
				
				
			
				
				<h3 id="CouchbasePersistence.GetConvResult">func (*CouchbasePersistence) <a href="http://localhost:6060/src/persistence/CouchbasePersistence.go?s=20441:20523#L620">GetConvResult</a>
					<a class="permalink" href="index.html#CouchbasePersistence.GetConvResult">&#xb6;</a>
					
					
				</h3>
				<pre>func (c *<a href="index.html#CouchbasePersistence">CouchbasePersistence</a>) GetConvResult(docPointer <a href="http://localhost:6060/pkg/reflect/">reflect</a>.<a href="http://localhost:6060/pkg/reflect/#Value">Value</a>) interface{}</pre>
				<p>
GetConvResult method are returns properly converted result in interface{} object from pointer in docPointer
</p>

				
				
				
			
				
				<h3 id="CouchbasePersistence.GetListByFilter">func (*CouchbasePersistence) <a href="http://localhost:6060/src/persistence/CouchbasePersistence.go?s=15388:15529#L467">GetListByFilter</a>
					<a class="permalink" href="index.html#CouchbasePersistence.GetListByFilter">&#xb6;</a>
					
					
				</h3>
				<pre>func (c *<a href="index.html#CouchbasePersistence">CouchbasePersistence</a>) GetListByFilter(correlationId <a href="http://localhost:6060/pkg/builtin/#string">string</a>, filter <a href="http://localhost:6060/pkg/builtin/#string">string</a>, sort <a href="http://localhost:6060/pkg/builtin/#string">string</a>, sel <a href="http://localhost:6060/pkg/builtin/#string">string</a>) (items []interface{}, err <a href="http://localhost:6060/pkg/builtin/#error">error</a>)</pre>
				<p>
GetListByFilter method are gets a list of data items retrieved by a given filter and sorted according to sort parameters.
This method shall be called by a public getListByFilter method from child class that
receives FilterParams and converts them into a filter function.
Parameters:
</p>
<pre>- correlationId    (optional) transaction id to trace execution through call chain.
- filter           (optional) a filter JSON object
- paging           (optional) paging parameters
- sort             (optional) sorting JSON object
- select           (optional) projection JSON object
</pre>
<p>
Returns:  items []interface{}, err error
data list or error.
</p>

				
				
				
			
				
				<h3 id="CouchbasePersistence.GetOneRandom">func (*CouchbasePersistence) <a href="http://localhost:6060/src/persistence/CouchbasePersistence.go?s=16930:17040#L513">GetOneRandom</a>
					<a class="permalink" href="index.html#CouchbasePersistence.GetOneRandom">&#xb6;</a>
					
					
				</h3>
				<pre>func (c *<a href="index.html#CouchbasePersistence">CouchbasePersistence</a>) GetOneRandom(correlationId <a href="http://localhost:6060/pkg/builtin/#string">string</a>, filter <a href="http://localhost:6060/pkg/builtin/#string">string</a>) (item interface{}, err <a href="http://localhost:6060/pkg/builtin/#error">error</a>)</pre>
				<p>
GetOneRandom method are gts a random item from items that match to a given filter.
This method shall be called by a public getOneRandom method from child class that
receives FilterParams and converts them into a filter function.
Parameters:
</p>
<pre>- correlationId     (optional) transaction id to trace execution through call chain.
- filter            (optional) a filter JSON object
</pre>
<p>
Returns: item interface{}, err error
a random item or error.
</p>

				
				
				
			
				
				<h3 id="CouchbasePersistence.GetPageByFilter">func (*CouchbasePersistence) <a href="http://localhost:6060/src/persistence/CouchbasePersistence.go?s=12964:13135#L388">GetPageByFilter</a>
					<a class="permalink" href="index.html#CouchbasePersistence.GetPageByFilter">&#xb6;</a>
					
					
				</h3>
				<pre>func (c *<a href="index.html#CouchbasePersistence">CouchbasePersistence</a>) GetPageByFilter(correlationId <a href="http://localhost:6060/pkg/builtin/#string">string</a>, filter <a href="http://localhost:6060/pkg/builtin/#string">string</a>, paging *<a href="http://localhost:6060/pkg/github.com/pip-services3-go/pip-services3-commons-go/data/">cdata</a>.<a href="http://localhost:6060/pkg/github.com/pip-services3-go/pip-services3-commons-go/data/#PagingParams">PagingParams</a>,
    sort <a href="http://localhost:6060/pkg/builtin/#string">string</a>, sel <a href="http://localhost:6060/pkg/builtin/#string">string</a>) (page *<a href="http://localhost:6060/pkg/github.com/pip-services3-go/pip-services3-commons-go/data/">cdata</a>.<a href="http://localhost:6060/pkg/github.com/pip-services3-go/pip-services3-commons-go/data/#DataPage">DataPage</a>, err <a href="http://localhost:6060/pkg/builtin/#error">error</a>)</pre>
				<p>
GetPageByFilter method are gets a page of data items retrieved by a given filter and sorted according to sort parameters.
This method shall be called by a public getPageByFilter method from child class that
receives FilterParams and converts them into a filter function.
Parameters:
</p>
<pre>- correlationId     (optional) transaction id to trace execution through call chain.
- filter            (optional) a filter query string after WHERE clause
- paging            (optional) paging parameters
- sort              (optional) sorting string after ORDER BY clause
- sel           (optional) projection string after SELECT clause
</pre>
<p>
Returns:  page *cdata.DataPage, err error
data page or error.
</p>

				
				
				
			
				
				<h3 id="CouchbasePersistence.GetProtoPtr">func (*CouchbasePersistence) <a href="http://localhost:6060/src/persistence/CouchbasePersistence.go?s=20157:20215#L611">GetProtoPtr</a>
					<a class="permalink" href="index.html#CouchbasePersistence.GetProtoPtr">&#xb6;</a>
					
					
				</h3>
				<pre>func (c *<a href="index.html#CouchbasePersistence">CouchbasePersistence</a>) GetProtoPtr() <a href="http://localhost:6060/pkg/reflect/">reflect</a>.<a href="http://localhost:6060/pkg/reflect/#Value">Value</a></pre>
				<p>
GetProtoPtr method are returns pointer on new prototype object for unmarshaling or decode from DB
Returns reflect.Value
pointer on new empty object
</p>

				
				
				
			
				
				<h3 id="CouchbasePersistence.GetPtrIfNeed">func (*CouchbasePersistence) <a href="http://localhost:6060/src/persistence/CouchbasePersistence.go?s=20789:20862#L630">GetPtrIfNeed</a>
					<a class="permalink" href="index.html#CouchbasePersistence.GetPtrIfNeed">&#xb6;</a>
					
					
				</h3>
				<pre>func (c *<a href="index.html#CouchbasePersistence">CouchbasePersistence</a>) GetPtrIfNeed(item interface{}) interface{}</pre>
				<p>
GetPtrIfNeed method are checks c.Prototype if need return pointer or value and returns properly results
</p>

				
				
				
			
				
				<h3 id="CouchbasePersistence.IsOpen">func (*CouchbasePersistence) <a href="http://localhost:6060/src/persistence/CouchbasePersistence.go?s=7621:7665#L211">IsOpen</a>
					<a class="permalink" href="index.html#CouchbasePersistence.IsOpen">&#xb6;</a>
					
					
				</h3>
				<pre>func (c *<a href="index.html#CouchbasePersistence">CouchbasePersistence</a>) IsOpen() <a href="http://localhost:6060/pkg/builtin/#bool">bool</a></pre>
				<p>
IsOpen method are checks if the component is opened.
Returns true if the component has been opened and false otherwise.
</p>

				
				
				
			
				
				<h3 id="CouchbasePersistence.Open">func (*CouchbasePersistence) <a href="http://localhost:6060/src/persistence/CouchbasePersistence.go?s=7867:7936#L219">Open</a>
					<a class="permalink" href="index.html#CouchbasePersistence.Open">&#xb6;</a>
					
					
				</h3>
				<pre>func (c *<a href="index.html#CouchbasePersistence">CouchbasePersistence</a>) Open(correlationId <a href="http://localhost:6060/pkg/builtin/#string">string</a>) (err <a href="http://localhost:6060/pkg/builtin/#error">error</a>)</pre>
				<p>
Open method are opens the component.
</p>
<pre>- correlationId  (optional) transaction id to trace execution through call chain.
</pre>
<p>
Return: error
error or nil no errors occured.
</p>

				
				
				
			
				
				<h3 id="CouchbasePersistence.SetReferences">func (*CouchbasePersistence) <a href="http://localhost:6060/src/persistence/CouchbasePersistence.go?s=6569:6642#L175">SetReferences</a>
					<a class="permalink" href="index.html#CouchbasePersistence.SetReferences">&#xb6;</a>
					
					
				</h3>
				<pre>func (c *<a href="index.html#CouchbasePersistence">CouchbasePersistence</a>) SetReferences(references <a href="http://localhost:6060/pkg/github.com/pip-services3-go/pip-services3-commons-go/refer/">cref</a>.<a href="http://localhost:6060/pkg/github.com/pip-services3-go/pip-services3-commons-go/refer/#IReferences">IReferences</a>)</pre>
				<p>
SetReferences method are sets references to dependent components.
</p>
<pre>- references 	references to locate the component dependencies.
</pre>

				
				
				
			
				
				<h3 id="CouchbasePersistence.UnsetReferences">func (*CouchbasePersistence) <a href="http://localhost:6060/src/persistence/CouchbasePersistence.go?s=7144:7192#L192">UnsetReferences</a>
					<a class="permalink" href="index.html#CouchbasePersistence.UnsetReferences">&#xb6;</a>
					
					
				</h3>
				<pre>func (c *<a href="index.html#CouchbasePersistence">CouchbasePersistence</a>) UnsetReferences()</pre>
				<p>
UnsetReferences method is unsets (clears) previously set references to dependent components.
</p>

				
				
				
			
		
			
			
			<h2 id="IdentifiableCouchbasePersistence">type <a href="http://localhost:6060/src/persistence/IdentifiableCouchbasePersistence.go?s=387:460#L6">IdentifiableCouchbasePersistence</a>
				<a class="permalink" href="index.html#IdentifiableCouchbasePersistence">&#xb6;</a>
				
				
			</h2>
			
			<pre>type IdentifiableCouchbasePersistence struct {
    *<a href="index.html#CouchbasePersistence">CouchbasePersistence</a>
}
</pre>

			

			

			
			
			

			
				
				<h3 id="NewIdentifiableCouchbasePersistence">func <a href="http://localhost:6060/src/persistence/IdentifiableCouchbasePersistence.go?s=4555:4683#L109">NewIdentifiableCouchbasePersistence</a>
					<a class="permalink" href="index.html#NewIdentifiableCouchbasePersistence">&#xb6;</a>
					
					
				</h3>
				<pre>func NewIdentifiableCouchbasePersistence(proto <a href="http://localhost:6060/pkg/reflect/">reflect</a>.<a href="http://localhost:6060/pkg/reflect/#Type">Type</a>, bucket <a href="http://localhost:6060/pkg/builtin/#string">string</a>, collection <a href="http://localhost:6060/pkg/builtin/#string">string</a>) *<a href="index.html#IdentifiableCouchbasePersistence">IdentifiableCouchbasePersistence</a></pre>
				<p>
IdentifiableCouchbasePersistence abstract persistence component that stores data in Couchbase
and implements a number of CRUD operations over data items with unique ids.
The data items must implement IIdentifiable interface.
</p>
<p>
In basic scenarios child classes shall only override GetPageByFilter,
GetListByFilter or DeleteByFilter operations with specific filter function.
All other operations can be used out of the box.
</p>
<p>
In complex scenarios child classes can implement additional operations by
accessing c.Bucket properties.
</p>
<p>
Configuration parameters:
</p>
<pre>- bucket:                      (optional) Couchbase bucket name
- collection:                  (optional) Couchbase collection name
- connection(s):
  - discovery_key:             (optional) a key to retrieve the connection from connect.idiscovery.html IDiscovery
  - host:                      host name or IP address
  - port:                      port number (default: 27017)
  - uri:                       resource URI or connection string with all parameters in it
- credential(s):
  - store_key:                 (optional) a key to retrieve the credentials from auth.icredentialstore.html ICredentialStore
  - username:                  (optional) user name
  - password:                  (optional) user password
- options:
  - max_pool_size:             (optional) maximum connection pool size (default: 2)
  - keep_alive:                (optional) enable connection keep alive (default: true)
  - connect_timeout:           (optional) connection timeout in milliseconds (default: 5 sec)
  - auto_reconnect:            (optional) enable auto reconnection (default: true)
  - max_page_size:             (optional) maximum page size (default: 100)
  - debug:                     (optional) enable debug output (default: false).
</pre>
<p>
References:
</p>
<p>
- *:logger:*:*:1.0           (optional) ILogger components to pass log messages components to pass log messages
- *:discovery:*:*:1.0        (optional)  IDiscovery services
- *:credential-store:*:*:1.0 (optional) Credential stores to resolve credentials
</p>
<pre>Example:

 type MyCouchbasePersistence struct {
     *IdentifiableCouchbasePersistence
 }

 func NewMyCouchbasePersistence()*MyCouchbasePersistence {
     c := MyCouchbasePersistence{}
     c.IdentifiableCouchbasePersistence = NewIdentifiableCouchbasePersistence(reflect.TypeOf(MyData{}), &#34;mybucket&#34;, &#34;mycollection&#34;)
     return &amp;c
 }

 func (c *MyCouchbasePersistence) GetPageByFilter(correlationId string, filter *cdata.FilterParams, paging *cdata.PagingParams) (page *cbfixture.MyDataPage, err error) {
     if filter == nil {
         filter = cdata.NewEmptyFilterParams()
     }
     name := filter.GetAsString(&#34;name&#34;)
     filterCondition := &#34;&#34;
     if name != &#34;&#34; {
         filterCondition += &#34;name=&#39;&#34; + name + &#34;&#39;&#34;
     }
     tempPage, err := c.IdentifiableCouchbasePersistence.GetPageByFilter(correlationId, filterCondition, paging, &#34;&#34;, &#34;&#34;)
     // Convert to MyDataPage
     dataLen := int64(len(tempPage.Data)) // For full release tempPage and delete this by GC
     data := make([]cbfixture.MyData, dataLen)
     for i, v := range tempPage.Data {
         data[i] = v.(cbfixture.MyData)
     }
     page = cbfixture.NewMyDataPage(&amp;dataLen, data)
     return page, err
 }

 persistence := NewMyCouchbasePersistence();
 persistence.Configure(ConfigParams.fromTuples(
     &#34;host&#34;, &#34;localhost&#34;,
     &#34;port&#34;, 27017,
 ));

   persitence.Open(&#34;123&#34;)
       ...
   persistence.Create(&#34;123&#34;, MyData{ id: &#34;1&#34;, name: &#34;ABC&#34; })
       ...
   result, err:= persistence.GetPageByFilter(
           &#34;123&#34;,
           NewFilterParamsFromTuples(&#34;name&#34;, &#34;ABC&#34;),
           nil)

   fmt.Println(page.data);          // Result: { id: &#34;1&#34;, name: &#34;ABC&#34; }
   persistence.DeleteById(&#34;123&#34;, &#34;1&#34;)
     ...
</pre>
<p>
NewIdentifiableCouchbasePersistence method are creates a new instance of the persistence component.
Parameters:
</p>
<pre>- proto reflect.Type prototype for properly convert
- bucket string  couchbase bucket name
- collection    (optional) a collection name.
</pre>

				
				
			

			
				
				<h3 id="IdentifiableCouchbasePersistence.Configure">func (*IdentifiableCouchbasePersistence) <a href="http://localhost:6060/src/persistence/IdentifiableCouchbasePersistence.go?s=5143:5223#L128">Configure</a>
					<a class="permalink" href="index.html#IdentifiableCouchbasePersistence.Configure">&#xb6;</a>
					
					
				</h3>
				<pre>func (c *<a href="index.html#IdentifiableCouchbasePersistence">IdentifiableCouchbasePersistence</a>) Configure(config *<a href="http://localhost:6060/pkg/github.com/pip-services3-go/pip-services3-commons-go/config/">cconf</a>.<a href="http://localhost:6060/pkg/github.com/pip-services3-go/pip-services3-commons-go/config/#ConfigParams">ConfigParams</a>)</pre>
				<pre>Configure method are configures component by passing configuration parameters.
</pre>
<p>
Parameters:
</p>
<pre>- config    configuration parameters to be set.
</pre>

				
				
				
			
				
				<h3 id="IdentifiableCouchbasePersistence.ConvertFromPublicPartial">func (*IdentifiableCouchbasePersistence) <a href="http://localhost:6060/src/persistence/IdentifiableCouchbasePersistence.go?s=5643:5743#L140">ConvertFromPublicPartial</a>
					<a class="permalink" href="index.html#IdentifiableCouchbasePersistence.ConvertFromPublicPartial">&#xb6;</a>
					
					
				</h3>
				<pre>func (c *<a href="index.html#IdentifiableCouchbasePersistence">IdentifiableCouchbasePersistence</a>) ConvertFromPublicPartial(value *interface{}) *interface{}</pre>
				<p>
ConvertFromPublicPartial method are converts the given object from the public partial format.
</p>
<pre>- value     the object to convert from the public partial format.
</pre>
<p>
Retruns the initial object.
</p>

				
				
				
			
				
				<h3 id="IdentifiableCouchbasePersistence.Create">func (*IdentifiableCouchbasePersistence) <a href="http://localhost:6060/src/persistence/IdentifiableCouchbasePersistence.go?s=7932:8053#L213">Create</a>
					<a class="permalink" href="index.html#IdentifiableCouchbasePersistence.Create">&#xb6;</a>
					
					
				</h3>
				<pre>func (c *<a href="index.html#IdentifiableCouchbasePersistence">IdentifiableCouchbasePersistence</a>) Create(correlationId <a href="http://localhost:6060/pkg/builtin/#string">string</a>, item interface{}) (result interface{}, err <a href="http://localhost:6060/pkg/builtin/#error">error</a>)</pre>
				<p>
Create method are creates a data item.
Parameters:
</p>
<pre>- correlation_id    (optional) transaction id to trace execution through call chain.
- item              an item to be created.
</pre>
<p>
Returns:  result interface{}, err error
created item or error.
</p>

				
				
				
			
				
				<h3 id="IdentifiableCouchbasePersistence.DeleteById">func (*IdentifiableCouchbasePersistence) <a href="http://localhost:6060/src/persistence/IdentifiableCouchbasePersistence.go?s=12270:12391#L337">DeleteById</a>
					<a class="permalink" href="index.html#IdentifiableCouchbasePersistence.DeleteById">&#xb6;</a>
					
					
				</h3>
				<pre>func (c *<a href="index.html#IdentifiableCouchbasePersistence">IdentifiableCouchbasePersistence</a>) DeleteById(correlationId <a href="http://localhost:6060/pkg/builtin/#string">string</a>, id interface{}) (item interface{}, err <a href="http://localhost:6060/pkg/builtin/#error">error</a>)</pre>
				<p>
DeleteById mathod are deleted a data item by its unique id.
Parameters:
</p>
<pre>- correlation_id    (optional) transaction id to trace execution through call chain.
- id                an id of the item to be deleted
</pre>
<p>
Returns: item interface{}, err error
deleted item or error.
</p>

				
				
				
			
				
				<h3 id="IdentifiableCouchbasePersistence.DeleteByIds">func (*IdentifiableCouchbasePersistence) <a href="http://localhost:6060/src/persistence/IdentifiableCouchbasePersistence.go?s=13182:13289#L364">DeleteByIds</a>
					<a class="permalink" href="index.html#IdentifiableCouchbasePersistence.DeleteByIds">&#xb6;</a>
					
					
				</h3>
				<pre>func (c *<a href="index.html#IdentifiableCouchbasePersistence">IdentifiableCouchbasePersistence</a>) DeleteByIds(correlationId <a href="http://localhost:6060/pkg/builtin/#string">string</a>, ids []interface{}) (err <a href="http://localhost:6060/pkg/builtin/#error">error</a>)</pre>
				<p>
DeleteByIds methos are deletes multiple data items by their unique ids.
</p>
<pre>- correlationId     (optional) transaction id to trace execution through call chain.
- ids               ids of data items to be deleted.
</pre>
<p>
Returns: error
error or nil for success.
</p>

				
				
				
			
				
				<h3 id="IdentifiableCouchbasePersistence.GetListByIds">func (*IdentifiableCouchbasePersistence) <a href="http://localhost:6060/src/persistence/IdentifiableCouchbasePersistence.go?s=6104:6233#L153">GetListByIds</a>
					<a class="permalink" href="index.html#IdentifiableCouchbasePersistence.GetListByIds">&#xb6;</a>
					
					
				</h3>
				<pre>func (c *<a href="index.html#IdentifiableCouchbasePersistence">IdentifiableCouchbasePersistence</a>) GetListByIds(correlationId <a href="http://localhost:6060/pkg/builtin/#string">string</a>, ids []interface{}) (items []interface{}, err <a href="http://localhost:6060/pkg/builtin/#error">error</a>)</pre>
				<p>
GetListByIds method are gets a list of data items retrieved by given unique ids.
Parameters:
</p>
<pre>- correlationId     (optional) transaction id to trace execution through call chain.
- ids               ids of data items to be retrieved
</pre>
<p>
Returns:  items []interface{}, err error
a data list or error.
</p>

				
				
				
			
				
				<h3 id="IdentifiableCouchbasePersistence.GetOneById">func (*IdentifiableCouchbasePersistence) <a href="http://localhost:6060/src/persistence/IdentifiableCouchbasePersistence.go?s=7127:7248#L188">GetOneById</a>
					<a class="permalink" href="index.html#IdentifiableCouchbasePersistence.GetOneById">&#xb6;</a>
					
					
				</h3>
				<pre>func (c *<a href="index.html#IdentifiableCouchbasePersistence">IdentifiableCouchbasePersistence</a>) GetOneById(correlationId <a href="http://localhost:6060/pkg/builtin/#string">string</a>, id interface{}) (item interface{}, err <a href="http://localhost:6060/pkg/builtin/#error">error</a>)</pre>
				<p>
GetOneById method are gets a data item by its unique id.
</p>
<pre>- correlationId     (optional) transaction id to trace execution through call chain.
- id                an id of data item to be retrieved.
</pre>
<p>
Returns:  item interface{}, err error
data item or error.
</p>

				
				
				
			
				
				<h3 id="IdentifiableCouchbasePersistence.Set">func (*IdentifiableCouchbasePersistence) <a href="http://localhost:6060/src/persistence/IdentifiableCouchbasePersistence.go?s=8957:9075#L241">Set</a>
					<a class="permalink" href="index.html#IdentifiableCouchbasePersistence.Set">&#xb6;</a>
					
					
				</h3>
				<pre>func (c *<a href="index.html#IdentifiableCouchbasePersistence">IdentifiableCouchbasePersistence</a>) Set(correlationId <a href="http://localhost:6060/pkg/builtin/#string">string</a>, item interface{}) (result interface{}, err <a href="http://localhost:6060/pkg/builtin/#error">error</a>)</pre>
				<p>
Set method are sets a data item. If the data item exists it updates it,
otherwise it create a new data item.
Parameters:
</p>
<pre>- correlation_id    (optional) transaction id to trace execution through call chain.
- item              a item to be set.
- callback          (optional) callback function that receives updated item or error.
</pre>

				
				
				
			
				
				<h3 id="IdentifiableCouchbasePersistence.Update">func (*IdentifiableCouchbasePersistence) <a href="http://localhost:6060/src/persistence/IdentifiableCouchbasePersistence.go?s=9885:10006#L270">Update</a>
					<a class="permalink" href="index.html#IdentifiableCouchbasePersistence.Update">&#xb6;</a>
					
					
				</h3>
				<pre>func (c *<a href="index.html#IdentifiableCouchbasePersistence">IdentifiableCouchbasePersistence</a>) Update(correlationId <a href="http://localhost:6060/pkg/builtin/#string">string</a>, item interface{}) (result interface{}, err <a href="http://localhost:6060/pkg/builtin/#error">error</a>)</pre>
				<p>
Update method are updates a data item.
Parameters:
</p>
<pre>- correlation_id    (optional) transaction id to trace execution through call chain.
- item              an item to be updated.
</pre>
<p>
Returns:  result interface{}, err error
updated item or error.
</p>

				
				
				
			
				
				<h3 id="IdentifiableCouchbasePersistence.UpdatePartially">func (*IdentifiableCouchbasePersistence) <a href="http://localhost:6060/src/persistence/IdentifiableCouchbasePersistence.go?s=10886:11037#L296">UpdatePartially</a>
					<a class="permalink" href="index.html#IdentifiableCouchbasePersistence.UpdatePartially">&#xb6;</a>
					
					
				</h3>
				<pre>func (c *<a href="index.html#IdentifiableCouchbasePersistence">IdentifiableCouchbasePersistence</a>) UpdatePartially(correlationId <a href="http://localhost:6060/pkg/builtin/#string">string</a>, id interface{}, data *<a href="http://localhost:6060/pkg/github.com/pip-services3-go/pip-services3-commons-go/data/">cdata</a>.<a href="http://localhost:6060/pkg/github.com/pip-services3-go/pip-services3-commons-go/data/#AnyValueMap">AnyValueMap</a>) (item interface{}, err <a href="http://localhost:6060/pkg/builtin/#error">error</a>)</pre>
				<p>
UpdatePartially methos are updates only few selected fields in a data item.
Parameters:
</p>
<pre>- correlation_id    (optional) transaction id to trace execution through call chain.
- id                an id of data item to be updated.
- data              a map with fields to be updated.
</pre>
<p>
Returns: result interface{}, err error
updated item or error.
</p>

				
				
				
			
		
	

	







<div id="footer">
Build version go1.13.15.<br>
Except as <a href="https://developers.google.com/site-policies#restrictions">noted</a>,
the content of this page is licensed under the
Creative Commons Attribution 3.0 License,
and code is licensed under a <a href="http://localhost:6060/LICENSE">BSD license</a>.<br>
<a href="http://localhost:6060/doc/tos.html">Terms of Service</a> |
<a href="http://www.google.com/intl/en/policies/privacy/">Privacy Policy</a>
</div>

</div><!-- .container -->
</div><!-- #page -->
</body>
</html>
